var otButtonCheckoutWorker='.bettercart_checkout,[name^="checkout"],[name^="checkout"] .loader-button__text,.shopify-payment-button__button,.btn-checkout,a.fbq-checkout,.checkout_btn,.OTCheckout,.OTCheckout span,#cart .action_button.right';function otDetectPixels(e){console.log("%c Omega Facebook pixels: Event tracking using the Web worker codebase","color: black; background: #EFDCCC;padding: 5px; border-radius: 5px");let t={...OT_DATA_CUSTOMER__TRACK_FB};""!=ot_ip&&(t={...t,client_ip_address:ot_ip}),"FREE"==omegaFBSettings?.settings?.plan_configs?.plan_type&&omegaFBSettings?.settings?.plan_configs?.order_remain<=0||e.forEach(e=>{fbq("init",e,t)})}function otHandleCheckWorkingPage(){return!otDisagreeForTracking()&&"undefined"!=typeof omegaFBSettings&&void 0!==omegaFBSettings.settings.is_enable_web_pixel&&"0"!=omegaFBSettings.settings.is_enable_web_pixel&&"1"==omegaFBSettings.settings.enable}otHandleCheckWorkingPage()&&otMultiFacebookPixelWorker({},omegaFBSettings.settings);var debounceTimeout=null;function checkAddToCartEvent(){var i={};getItemOnCartPageFB(function(e){var t=localStorage.getItem("item_count");localStorage.setItem("OTPXADDED",1),t!=e.item_count&&window.localStorage.setItem("item_count",e.item_count);let c="1"==omegaFBSettings.settings.content_type_event?"product":"product_group";if(0<e.items.length&&"shipping-protection"!=e.items[0].handle&&t<e.item_count){let n=e.items[0],a=(localStorage.setItem("OTPXADDED",0),localStorage.setItem("item_count",e.item_count),n.variant_id),o=("product_group"==c&&(a=n.product_id),generateEventID(36));otCheckEnableTracking("pixel_track_addtocart")&&arrayFBPixelTrack.forEach(function(e,t){otfbq(""+e,"AddToCart",{content_ids:a,content_type:c,value:parseInt(n.price)/100,content_name:n.product_title,currency:Shopify.currency.active},o)}),otCheckEnableTracking("capi_track_addtocart")&&(t=detectLastInfoATCByProductId(n.product_id,e.items),trackEventFBConversionAPI(i,{action:"AddToCart",event_id:o,event_source_url:fb_pageURL,content_ids:a,content_type:c,value:parseInt(n.price)/100,content_name:n.product_title,currency:Shopify.currency.active,pixels:arrayFBPixelTrack,shop:Shopify.shop,products:t,obj_fbp_fbc:otGetAttributeFBCAndFBP(),...OT_DATA_CUSTOMER,...ot_information_campaign}))}})}async function otMultiFacebookPixelWorker(a,t){let o="1"==t.content_type_event?"product":"product_group";if("undefined"!=typeof arrayFBPixelTrack&&0<arrayFBPixelTrack.length){if(otDetectPixels(arrayFBPixelTrack),-1==fb_pageURL.indexOf("/products/")&&"1"!=t.is_enable_trigger&&(c=generateEventID(36),otCheckEnableTracking("pixel_track_pageview")&&fbq("track","PageView",{},{eventID:c}),!otCheckEnableTracking("capi_track_pageview")||"FREE"==omegaFBSettings?.settings?.plan_configs?.plan_type&&omegaFBSettings?.settings?.plan_configs?.order_remain<=0||trackEventFBConversionAPI(a,{action:"PageView",event_id:c,event_source_url:fb_pageURL,pixels:arrayFBPixelTrack,shop:Shopify.shop,obj_fbp_fbc:otGetAttributeFBCAndFBP(),...OT_DATA_CUSTOMER,...ot_information_campaign})),-1<fb_pageURL.indexOf("/products/")){i=-1<fb_pageURL.indexOf("?")?(i=fb_pageURL.split("?"))[0]+".json":fb_pageURL+".json";var c=await otGetInfoProductByLink(i),i=(-1<c.title.indexOf("'")&&(c.title=c.title.replace(/'/g,"")),generateEventID(36));let t=ot_getUrlParam("variant"),e=t??meta.product.variants[0].id,n=("product_group"==o&&(e=(void 0!==c.id?c:meta.product).id),c.variants[0].price);null!=t&&meta.product.variants.forEach(e=>{e.id==t&&(n=parseInt(e.price)/100)}),otCheckEnableTracking("pixel_track_pageview")&&fbq("track","PageView",{},{eventID:i}),otCheckEnableTracking("pixel_track_viewcontent")&&fbq("track","ViewContent",{content_ids:[e],content_type:o,value:n,content_name:c.title,currency:Shopify.currency.active},{eventID:i}),!otCheckEnableTracking("capi_track_viewcontent")||"FREE"==omegaFBSettings?.settings?.plan_configs?.plan_type&&omegaFBSettings?.settings?.plan_configs?.order_remain<=0||trackEventFBConversionAPI(a,{action:"ViewContent",event_id:i,event_source_url:fb_pageURL,content_ids:[e],content_type:o,value:n,content_name:c.title,currency:Shopify.currency.active,pixels:arrayFBPixelTrack,shop:Shopify.shop,obj_fbp_fbc:otGetAttributeFBCAndFBP(),...OT_DATA_CUSTOMER,...ot_information_campaign})}-1<fb_pageURL.indexOf("/search")&&(i=generateEventID(36),otCheckEnableTracking("pixel_track_search")&&fbq("track","Search",{search_string:ot_getUrlParam("q")||""},{eventID:i}),otCheckEnableTracking("capi_track_search"))&&trackEventFBConversionAPI(a,{action:"Search",event_id:i,search_string:ot_getUrlParam("q")||"",event_source_url:fb_pageURL,pixels:arrayFBPixelTrack,shop:Shopify.shop,obj_fbp_fbc:otGetAttributeFBCAndFBP(),...OT_DATA_CUSTOMER,...ot_information_campaign}),"1"!=t.is_enable_trigger&&document.addEventListener("click",function(e){otEventClickIsMatchesDom(e,2==t.is_enable_web_pixel?"ot_pixel_detect-sample":otButtonCheckoutWorker,otListAllCustomCheckout)&&getItemOnCartPageFB(function(e){otTrackICWorker(arrayFBPixelTrack,t,e,o)})})}}function otTrackICWorker(e,t,a,o){var c={};if(0<a.items.length){let t=[],n=[];a.items.forEach(function(e){t.push("product_group"==o?e.product_id:e.variant_id),n.push(e.product_title)});var i=generateEventID(36);otCheckEnableTracking("pixel_track_checkout")&&fbq("track","InitiateCheckout",{content_type:o,content_ids:t,currency:Shopify.currency.active,value:parseFloat(a.total_price)/100,num_items:a.item_count,content_name:n},{eventID:i}),otCheckEnableTracking("capi_track_checkout")&&trackEventFBConversionAPI(c,{action:"InitiateCheckout",event_id:i,event_source_url:fb_pageURL,content_ids:t,content_type:o,num_items:a.item_count,value:parseFloat(a.total_price)/100,content_name:n,currency:Shopify.currency.active,pixels:e,shop:Shopify.shop,obj_fbp_fbc:otGetAttributeFBCAndFBP(),...OT_DATA_CUSTOMER,...ot_information_campaign})}else if(void 0!==meta.product){let t=generateEventID(36);otCheckEnableTracking("pixel_track_checkout")&&e.forEach(function(e){otfbq(""+e,"InitiateCheckout",{content_type:o,content_ids:("product_group"==o?meta.product:meta.product.variants[0]).id,currency:Shopify.currency.active,value:meta.product.variants[0].price,num_items:1,content_name:meta.product.variants[0].name},t)}),otCheckEnableTracking("capi_track_checkout")&&trackEventFBConversionAPI(c,{action:"InitiateCheckout",event_id:t,event_source_url:fb_pageURL,content_ids:("product_group"==o?meta.product:meta.product.variants[0]).id,content_type:o,num_items:1,value:meta.product.variants[0].price,content_name:meta.product.variants[0].name,currency:Shopify.currency.active,pixels:e,shop:Shopify.shop,obj_fbp_fbc:otGetAttributeFBCAndFBP(),...OT_DATA_CUSTOMER,...ot_information_campaign})}}setTimeout(()=>{new MutationObserver(function(e){e.forEach(function(e){debounceTimeout&&clearTimeout(debounceTimeout),debounceTimeout=setTimeout(()=>{var e;null!=localStorage.getItem("OT_DATA_TRIGGER_ATC_NEW_TRIGGER")?otHandleCheckWorkingPage()?(e=JSON.parse(localStorage.getItem("OT_DATA_TRIGGER_ATC_NEW_TRIGGER")),omegaCallBackAddToCartTrigger(e)):localStorage.removeItem("OT_DATA_TRIGGER_ATC_NEW_TRIGGER"):otHandleCheckWorkingPage()&&checkAddToCartEvent(),debounceTimeout=null},1e3)})}).observe(document.documentElement,{attributes:!0,characterData:!0,childList:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})},2e3);